<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <ul id="ul"></ul>
    <script>
      let now = Date.now();
      const total =  100000

      const once = 20
      const page = total / once
      let index = 0
      

      function loop(curTotal, curIndex) {
        if(curTotal <= 0) {
          return false
        }
        
        let pageCount =  Math.min(curTotal, once)

        let fragment = document.createDocumentFragment() // 虚拟文档片段
        requestAnimationFrame(() => {
          for(let i = 0; i < total; i++) {
            let li = document.createElement('li')
            li.innerText =curIndex + i + ':' + ~~(Math.random() * total)
            fragment.appendChild(li)
          }
          ul.appendChild(fragment)
          loop(curTotal - pageCount, curIndex + pageCount)
        },0)
      }
      loop(total, index)
    </script>
  
</body>
</html>